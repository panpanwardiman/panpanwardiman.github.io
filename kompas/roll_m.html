
<!DOCTYPE html>
<html lang="id">
<head>
       
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PT7PC4');</script>
<!-- End Google Tag Manager -->
<title>Berita Terkini Hari Ini, Kabar Akurat Terpercaya - Kompas.com</title>
<link href="//securepubads.g.doubleclick.net" rel="dns-prefetch">
<link href="//asset.kompas.com" rel="dns-prefetch">
<link href="//adsimg.kompas.com" rel="dns-prefetch">
<link href="//static.criteo.net" rel="dns-prefetch">
<link href="//bidder.criteo.com" rel="dns-prefetch">
<link href="//rtax.criteo.com" rel="dns-prefetch">
<link href="//tpc.googlesyndication.com" rel="dns-prefetch">
<link href="//cm.g.doubleclick.net" rel="dns-prefetch">
<link href="//s0.2mdn.net" rel="dns-prefetch">
<link href="//www.kompas.com" rel="dns-prefetch">
<link href="//www.facebook.com" rel="dns-prefetch">
<link href="//mcdp-sadc1.outbrain.com" rel="dns-prefetch">
<link href="//code.jquery.com" rel="dns-prefetch">
<link href="//mc.yandex.ru" rel="dns-prefetch">
<link href="//apis.kompas.com" rel="dns-prefetch"><link rel="apple-touch-icon" href="https://asset.kompas.com/data/2017/mobile/images/app-icon.jpg?v=1"> 
<link rel="android-touch-icon" href="https://asset.kompas.com/data/2017/mobile/images/app-icon.jpg?v=1" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, target-densityDpi=medium-dpi, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
<meta name="description" content="Kompas.com - Berita Indonesia dan Dunia Terkini Hari Ini, Kabar Harian Terbaru Terpercaya Terlengkap Seputar Politik, Ekonomi, Travel, Teknologi, Otomotif, Bola">
<meta name="author" content="PT. Kompas Cyber Media">
<meta name="robots" content="index, follow" />

<!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#000">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#000">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<!-- S:fb meta -->
<meta property="og:type" content="article" />
<meta property="og:image" content="https://asset.kompas.com/data/2019/kompascom/banner-jmd-4.jpg" />
<meta property="og:title" content="Berita Terkini Hari Ini, Kabar Akurat Terpercaya - Kompas.com" />
<meta property="og:url" content="http://video.lkompas.com/rolls/216133" />
<meta property="og:site_name" content="KOMPAS.com" />
<meta property="og:description" content="Kompas.com - Berita Indonesia dan Dunia Terkini Hari Ini, Kabar Harian Terbaru Terpercaya Terlengkap Seputar Politik, Ekonomi, Travel, Teknologi, Otomotif, Bola" />
<meta property="fb:app_id" content="324557847592228" />
<!-- e:fb meta -->

<!-- S:tweeter card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@kompascom" />
<meta name="twitter:creator" content="@kompascom">
<meta name="twitter:title" content="Berita Terkini Hari Ini, Kabar Akurat Terpercaya - Kompas.com" />
<meta name="twitter:description" content="Kompas.com - Berita Indonesia dan Dunia Terkini Hari Ini, Kabar Harian Terbaru Terpercaya Terlengkap Seputar Politik, Ekonomi, Travel, Teknologi, Otomotif, Bola" />
<meta name="twitter:image" content="https://asset.kompas.com/data/2019/kompascom/banner-jmd-4.jpg" />
<!-- E:tweeter card -->

<meta name="theme-color" content="#000">
<meta name="msapplication-navbutton-color" content="#000">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">



<link rel="canonical" href="http://video.lkompas.com/rolls/216133" />
<link rel="apple-touch-icon" href="https://asset.kompas.com/data/2017/mobile/images/apple-touch-icon.png">
<link rel="shortcut icon" href="https://asset.kompas.com/data/2017/mobile/images/favicon-16x16.png">


    <link href="https://asset.kompas.com/data/2017/mobile/css/iconpack-kanal.min.css?v=5" rel="stylesheet" type="text/css"> 
    <link href="https://asset.kompas.com/data/2022/11/21/kompascom/mobile/css/style-kanal.min.css" rel="stylesheet" type="text/css"> 


<link rel="preconnect" href="https://scripts.jixie.media"/>

<style>
@font-face {
  font-family: 'Roboto';
  font-display: swap;
  font-style: normal;
  font-weight: 400;
  src: local('Roboto'), local('Roboto-Regular'), url(https://fonts.gstatic.com/s/roboto/v19/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Roboto';
  font-display: swap;
  font-style: italic;
  font-weight: 400;
  src: local('Roboto Italic'), local('Roboto-Italic'), url(https://fonts.gstatic.com/s/roboto/v19/KFOkCnqEu92Fr1Mu51xIIzIXKMny.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Roboto';
  font-display: swap;
  font-style: normal;
  font-weight: 500;
  src: local('Roboto Medium'), local('Roboto-Medium'), url(https://fonts.gstatic.com/s/roboto/v19/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Roboto';
  font-display: swap;
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Bold'), local('Roboto-Bold'), url(https://fonts.gstatic.com/s/roboto/v19/KFOlCnqEu92Fr1MmWUlfBBc4AMP6lQ.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Roboto';
  font-display: swap;
  font-style: italic;
  font-weight: 700;
  src: local('Roboto Bold Italic'), local('Roboto-BoldItalic'), url(https://fonts.gstatic.com/s/roboto/v19/KFOjCnqEu92Fr1Mu51TzBic6CsTYl4BO.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Roboto Condensed';
  font-display: swap;
  font-style: normal;
  font-weight: 300;
  src: local('Roboto Condensed Light'), local('RobotoCondensed-Light'), url(https://fonts.gstatic.com/s/robotocondensed/v17/ieVi2ZhZI2eCN5jzbjEETS9weq8-33mZGCQYb9lecyU.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Roboto Condensed';
  font-display: swap;
  font-style: normal;
  font-weight: 700;
  src: local('Roboto Condensed Bold'), local('RobotoCondensed-Bold'), url(https://fonts.gstatic.com/s/robotocondensed/v17/ieVi2ZhZI2eCN5jzbjEETS9weq8-32meGCQYbw.woff2) format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
</style>
 
<script type="text/javascript">
window.jixie_o = {
	accountid: "9262bf2590d558736cac4fff7978fcb1",
	partner_cookie: 'kmps_usrid',
	external_ids: ['tdid','tdid2'],
	sha256mail_cookie:'usermail',
	ad_blocker: true,
	logbids: true,
	userprofile: true,
};
</script>
<script async src="https://scripts.jixie.media/jxpublisher_3_1.min.js"></script>

	<script type="text/javascript">
		window.jixie_p = window.jixie_p || [];
		window.jixie_p.push({
			action: "viewhome"
		});
	</script>

<!-- (gpt.top) -->

<!-- (ads.google.head.rs) -->
<!-- (ads.video.gpt) -->

<style type="text/css">img:not([src]):not([srcset]) {visibility: hidden;}img {max-width: 100%;}</style>
<meta name="google-site-verification" content="oHnKUtgqOLtZOYp5HWas27GCVmPbsKDE5NHDPrsOJpc" />


<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "WebSite",
  "url": "https://www.kompas.com/",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://search.kompas.com/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>



<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Organization",
  "url": "https://www.kompas.com",
  "logo": "https://asset.kompas.com/data/2018/kompascom/images/logo-kompascom-biru.png",
  "sameAs" : [
    "https://www.facebook.com/kompascom",
    "https://www.twitter.com/kompascom",
    "https://instagram.com/kompascom",
    "https://line.me/ti/p/%40kompas.com"
  ]
}
</script>


    <link rel="stylesheet" href="https://asset.kompas.com/data/2022/11/25/rolls/mobile/css/kcm-reels.min.css" type="text/css">
    <script src="https://asset.kompas.com/data/2016/mobile/js/jquery-2.2.1.min.js"></script>
</head>
<body class="theme--reels">
    <!-- s : page -->
	<div class="root">
        <div class="reelsVideo-wrap" data-content="false">
            <div class="reelsVideo-autoplay">
                <label class="label">
                    <input type="checkbox" checked="checked"/>
                    <span class="background">
                        <span class="knob"></span>
                    </span>
                </label>
            </div>

            <div class="reelsVideo-player reelsVideo-player-unready" data-autoplay="true">
                <div id="idVideoCtrForWidget" style="position:absolute;display:block;bottom:0px;left:0px;right:0px;top:0px"></div>
            </div>

            <div id="reelsVideo-snap" class="reelsVideo-list reelsVideo-js"></div>
            <div class="reelsArrow-nav">
                <div class="reelsArrow -left" onClick="goArrow('prev')"><span class="reelsArrow-icon iconLeft"></span></div>
                <div class="reelsArrow -right" onClick="goArrow('next')"><span class="reelsArrow-icon iconRight"></span></div>
            </div>
        </div>

        <script src="https://scripts.jixie.media/jxvideo.3.1.min.js"></script>
        <script>
            var player = null;
                
            var jxPlayerCfg1 = {
                "accountid": "9262bf2590d558736cac4fff7978fcb1",
                "container": "idVideoCtrForWidget", 
                "customid": "vertikal-video",        
                "headless": true,
                "autoplay" : "always", 
                "sound"    : "on", 
                "restrictions": {
                    "maxheight": 480
                }
            };
        
            player = JX.player(jxPlayerCfg1);
        
            var videoIds = [];
            let videoIdx = 0
        
            function highlightVideo(nextVideoId) {
                //Add attr video-id first
                const list_1 = document.querySelector('.reelsVideo-list .reelsVideo-item:nth-child(1)').getAttribute('video-id');
                document.getElementsByClassName('reelsVideo-item')[0].classList.add('-active');
        
                const item = document.querySelectorAll(".reelsVideo-item ")
                const observer = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
        
                        if (entry.isIntersecting) {
                            if (!entry.target.classList.contains('-active')) {
                                entry.target.classList.add('-active');
                            }
                        }else{
                            if (entry.target.classList.contains('-active')) {
                                entry.target.classList.remove('-active');
                            }
                        }
                    })
                }, {
                    threshold: 0.25,
                })
        
                item.forEach(page => {
                    observer.observe(page)
                })
                
            }

            function cbOnVideoChanged(evtname, videoId) {
                highlightVideo(videoId);
            }
        
            function goArrow(event) {
                if(event=='prev') {
                    videoIdx--
                    goPrevious(videoIds[videoIdx])
                }
                if(event=='next') {
                    videoIdx++
                    goNext(videoIds[videoIdx])
                }
            }
        
            function triggerOneVideo(nextVideoId) {
                player.play(nextVideoId);
            }
        
            function triggerActionVideo(videoId) {        
                var el = event.target.parentElement.parentElement.parentElement.parentElement;
                if ( -1 !== el.className.indexOf( "-pause" ) ) {
                    el.className = el.className.replace( " -pause", "" )
        
                    player.play()
                } else {
                    el.className += " -pause"
        
                    player.pause()
                }        
            }
        
            player.addEventListener('playing', function(data){ 
                let ks = document.querySelector('.reelsVideo-inner.-pause')
                if(!!ks) {
                    ks.classList.remove('-pause');
                }
            })
            player.addEventListener('video_ended', function(){ 
                let autop = $('.reelsVideo-player').attr('data-autoplay');
                if(autop=='true') {
                    videoIdx++
                    goNext(videoIds[videoIdx])
                }
            });
            player.addListener("videochange", cbOnVideoChanged);
        
            //Indicator Smooth scrool video
            $("#reelsVideo-snap").scroll(function () {
                let ocv = $('.reelsVideo-item.-active')
                let aa = (ocv.offset() || { "top": NaN }).top;
                let bb = ocv.height();
                let ad = ocv.attr('data-video-index')
                if (!isNaN(aa)) {
                    if(aa <= bb ){
                        $('.reelsVideo-player').addClass('-hide');
                        //$('.reelsVideo-player').css('opacity', 0);
                        $('.reelsVideo-item').addClass('-scrolling');
                        $('.reelsVideo-inner.-pause').removeClass('-pause');
                        player.pause()
                    }
        
                    if(aa == 0){
                        $('.reelsVideo-player').removeClass('-hide');
                        $('.reelsVideo-item').removeClass('-scrolling');
                        if(ad==videoIdx) {
                            player.play()
                        } else {
                            player.loadVideoById(videoIds[ad])
                            videoIdx=ad
                            change_url(videoIds[ad])
                        }
                    }
                }
            });
        
            //Action Prev Arrow
            function goPrevious(e) {
                change_url(e)
                document.getElementById('reelsVideo-snap').scrollBy({ 
                    top: -40,
                    behavior: 'smooth' 
                });
        
                if(!!e) {
                    player.loadVideoById(e)
                }
            }
        
            //Action Next Arrow
            function goNext(e) {
                change_url(e)
                document.getElementById('reelsVideo-snap').scrollBy({ 
                    top: 40,
                    behavior: 'smooth' 
                });
        
                if(!!e) {
                player.loadVideoById(e)
                }
            }

            async function getDataReels() {
                const url = 'https://api.kompas.com/apps/v1/video/vertical?keyword=food&limit=25';
                const response = await fetch(url);
                const data = await response.json();
                const reels = [];

                reels.push({"avatar":"Food","author":"My.Foodplay","thumbnail":"https:\/\/assets-studiohub.kompas.com\/video2019\/73f614858444241bddf143\/4d261669131206e65fa734\/4d261669131206e65fa734.png","title":"3 Resep Sambal Nusantara, Sedap Banget!","video_id":216133,"desc":"<p>Hi FoodLovers!..<\/p><p>Tau ga sih, banyak banget aneka ragam sambal dari sabang sampai merauke lho!\u00a0<\/p><p>Foodplace akan berbagi resep sambal aneka nusantara nih...<\/p><p>Buat kamu yang doyan makan sambal, bisa nih coba bikin beberapa sambal ini di rumah!<\/p><p>Kira-kira sambal favorit kalian yang mana ya? Yuk, coba komen di bawah!<\/p><p><br><\/p><p>Produser : Dian Reinis Kumampung\n<\/p><p>Creative : Azahranisa Puspasari\n<\/p><p>Videographer 1 : Miftahul Rizky\n<\/p><p>Videographer 2 : Batyalael Chriswied\n<\/p><p>Video Editor : Muhammad Zainnur Rahman<\/p><p><br><\/p><p>#anekasambal #sambalnusantara #kompascom #foodplace<\/p>"});

                if (typeof data.status !== 'undefined' && data.status) {
                    const items = await data.data.data
                    for (var i = 0; i<items.length; i++) {
                        let thumbnail;
                        let reel = items[i]._source;

                        if (reel.id == reels[0].video_id) continue;

                        if (typeof reel.sh_custom_thumb !== 'undefined' && reel.sh_custom_thumb != null) {
                            thumbnail = reel.sh_custom_thumb;
                        } else {
                            if (reel.thumbnails != null) {
                                thumbnail = reel.thumbnails[0].url;
                            }
                        }

                        reels.push({
                            "avatar": "Food",
                            "author": "My.Foodplay",//reel.createdby,
                            "thumbnail": thumbnail,
                            "title": reel.title,
                            "video_id": reel.id,
                            "desc": reel.long_desc
                        })
                    }
                }   

                return reels
            }
        
            async function getVideo() {
                let items = await getDataReels();
                if (items.length == 0) {
                    return
                }

                var rvList = '';
                items.forEach(function(item, index) { 
                    //populate our simple array
                    videoIds.push(item.video_id);
                    var cls = ''
                    if (index == 0) {
                        var cls = '-active'
                    }
                    rvList += `<div id="reelsVideo-item-${item.video_id}" class="reelsVideo-item ${cls}" video-id="${item.video_id}" data-video-index="${index}">
                        <div class="reelsVideo-inner">
                            <div class="reelsVideo-action_play"></div>
                            <div class="reelsVideo-thumb">
                                <div class="reelsVideo-thumbWrap">
                                    <div class="reelsVideo-thumbInner">
                                        <div class="reelsVideo-action_area" onclick="triggerActionVideo(${item.video_id})"></div>
                                        <img src="${item.thumbnail}" alt="${item.title}">
                                    </div>
                                </div>
                            </div>

                            <div class="reelsVideo-side">
                                <div class="reelsVideo-sideTop">
                                    <div class="reelsVideo-side_item actshare">
                                        <div class="reelsVideo-side_icon">
                                            <img src="https://asset.kompas.com/data/2022/10/05/kompascom/mobile/images/reels/icon-share.svg" alt="">
                                        </div>
                                    </div>

                                    <div class="reelsVideo-side_item">
                                    <div class="reelsVideo-content_right">
                                        <a href="https://video.kompas.com/">
                                        <div class="reelsVideo-content_close"></div>
                                        </a>  
                                    </div>
                                    </div>
                                </div>
                            </div>

                            <div class="reelsVideo-share">
                                <div class="social social--title clearfix">
                                    Bagikan video ini melalui
                                </div>
                                <div class="social social--article clearfix">
                                    <div class="social__item" onclick="fb_share('${clear_char(item.title)}', '${gen_link(item.video_id)}')">
                                        <a href="javascript:void(0)" class="social__item-wrap">
                                            <div class="social__link social__link--facebook ico-share icon-fb ico-bg bg-fb">
                                            <img src="https://asset.kompas.com/data/2022/10/05/kompascom/mobile/images/icon-facebook.png" alt="Facebook">
                                            </div>
                                            <div class="social__item-label">Facebook</div>
                                        </a>
                                    </div>
                                    <div class="social__item" onclick="twitter_share('${clear_char(item.title)}', '${gen_link(item.video_id)}')">
                                        <a href="javascript:void(0)" class="social__item-wrap">
                                            <div class="social__link social__link--twitter ico-share icon-tw ico-bg bg-tw">
                                            <img src="https://asset.kompas.com/data/2022/10/05/kompascom/mobile/images/icon-twitter.png" alt="Twitter">
                                            </div>
                                            <div class="social__item-label">Twitter</div>
                                        </a>
                                    </div>
                                    <div class="social__item" onclick="whatsapp_share('${clear_char(item.title)}', '${gen_link(item.video_id)}')">
                                        <a href="javascript:void(0)" class="social__item-wrap">
                                            <div class="social__link social__link--whatsapp ico-share icon-ws ico-bg bg-ws">
                                            <img src="https://asset.kompas.com/data/2022/10/05/kompascom/mobile/images/icon-whatsapp.png" alt="Whatsapp">
                                            </div>
                                            <div class="social__item-label">Whatsapp</div>
                                        </a>
                                    </div>
                                    <div class="social__item" onclick="telegram_share('${clear_char(item.title)}', '${gen_link(item.video_id)}')">
                                        <a href="javascript:void(0)" class="social__item-wrap">
                                            <div class="social__link social__link--telegram ico-share icon-telegram ico-bg bg-telegram">
                                            <img src="https://asset.kompas.com/data/2022/10/05/kompascom/mobile/images/icon-telegram.png" alt="Line">
                                            </div>
                                            <div class="social__item-label">Telegram</div>
                                        </a>
                                    </div>
                                    <div class="social__item" onclick="line_share('${clear_char(item.title)}', '${gen_link(item.video_id)}')">
                                        <a href="javascript:void(0)" class="social__item-wrap">
                                            <div class="social__link social__link--line ico-share icon-line ico-bg bg-line">
                                            <img src="https://asset.kompas.com/data/2017/mobile/images/icon-line.png" alt="Line">
                                            </div>
                                            <div class="social__item-label">Line</div>
                                        </a>
                                    </div>
                                    <div class="social__item">
                                        <a onclick="copy_share(this)" href="javascript:void(0)" class="button buttonCopyLink socmedButton" role="button" aria-label="Share to Copy Link" data-form="copyLinkUrl${item.video_id}" data-title="URL Berhasil disalin">
                                            <span class="icoSocmed icoCopyLink"></span>
                                            <span class="socmedTxt">Copy Link</span>
                                        </a>
                                        <input class="socmedSrc" type="text" id="copyLinkUrl${item.video_id}" value="${gen_link(item.video_id)}" style="display: none;">
                                    </div>
                                </div>
                            </div>

                            <div class="reelsVideo-content">
                                <div class="reelsVideo-content_head">
                                    <div class="reelsVideo-content_headinner">
                                        <div class="reelsVideo-avatar">
                                            <img src="https://yt3.ggpht.com/ytc/AKedOLTX7Gglxk2ngzXjAGiFDvnZ3lKveoQlkkymaHIZ=s88-c-k-c0x00ffffff-no-rj">
                                        </div>
                                        <div class="reelsVideo-content_title">
                                            <h2>${item.author}</h2>
                                        </div>
                                    </div>
                                </div>
                                <div class="reelsVideo-desc">
                                    <div class="reelsVideo-desc_inner">
                                        <b>${item.title}</b>, ${item.desc}
                                    </div>
                                </div>    

                            </div>  

                        </div>
                    </div>`
                })
                document.querySelector('.reelsVideo-list').innerHTML = rvList;

                $('<button class="reelsVideo-toggle"></button>').insertAfter('.reelsVideo-desc')
                
                $(document).on('click', '.reelsVideo-desc', function() {
                    $(this).toggleClass('active');
                });
                
                if (videoIds.length) {
                    //player.loadJx(videoIds);
                    //player.loadPlaylistById(videoIds);
                    player.loadVideoById(items[0].video_id);
                }
            }
            getVideo();

            function gen_link(video_id) {
                const base_url = window.location.origin
                return `${base_url}/rolls/${video_id}`;
            }

            function change_url(e) {
                const base_url = window.location.origin;
                const url = `${base_url}/rolls/${e}`;
                window.history.pushState({}, '', url);
            }

            function clear_char(str) {
                return str.replace(/[^a-zA-Z ]/g, '');
            }

            function line_share(t, l) {return window.open("https://line.me/R/msg/text/?"+encodeURIComponent(t)+"%0D%0A"+encodeURIComponent(l),"sharer","toolbar=0,status=0,width=626,height=436"),!1}
            function twitter_share(t,l) {return u=t,window.open("https://twitter.com/intent/tweet?original_referer="+encodeURIComponent(l)+"&text="+encodeURIComponent(u)+"%0D%0A"+encodeURIComponent(l),"sharer","toolbar=0,status=0,width=626,height=436"),!1}function fb_share(e,o){ return u=o,t=e,window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(u)+"&t="+encodeURIComponent(t),"sharer","toolbar=0,status=0,width=626,height=436"),!1}function plus_share(t){return u=t,window.open("https://plus.google.com/share?url="+encodeURIComponent(u),"sharer","toolbar=0,status=0,width=626,height=436"),!1}function telegram_share(e,o){return u=o,t=e,window.open("https://t.me/share/url?url="+encodeURIComponent(u)+"&text="+encodeURIComponent(t),"sharer","toolbar=0,status=0,width=626,height=436"),!1}function whatsapp_share(e,o){return u=o,t=e,window.open("https://wa.me/?text="+encodeURIComponent(u)+" - "+encodeURIComponent(t),"sharer","toolbar=0,status=0,width=626,height=436"),!1}

            function copy_share(t) {
                let o = document.getElementById(t.getAttribute('data-form'));
                o.select()
                o.setSelectionRange(0, 99999)
                navigator.clipboard.writeText(o.value)
                t.classList.add("-tooltip")
                setTimeout(function () {
                    t.classList.remove("-tooltip");
                }, 1500);
            }
        </script>
    </div>
    <!-- e : page -->
    <script src="https://asset.kompas.com/data/2022/11/25/rolls/mobile/js/reels-video.min.js?v=20221125"></script>
                <script src="https://asset.kompas.com/data/2016/mobile/js/jquery-2.2.1.min.js"></script>
    
            <script async src="https://asset.kompas.com/data/2022/10/17/kompascom/mobile/js/main-new.min.js"></script> 
    
<script async src="https://asset.kompas.com/data/2022/sso/js/sso_personalisasi.min.js?v=4"></script>
<script async src="https://asset.kompas.com/data/2021/sso/js/extender.min.js"></script>
<script async src="https://asset.kompas.com/data/2022/sso/js/ssouser.min.js?v=2"></script>

<script>
    !(function () {
        var time = new Date().getTime();

        window.addEventListener("scroll", function(e) {
            time = new Date().getTime();
        });

        function refresh() {
            if (new Date().getTime() - time >= 900000) { // 15 Menit
                window.location.reload(true);
            } else {
                setTimeout(refresh, 10000);
            }
        }
        setTimeout(refresh, 10000);
    })();
</script>

    <script src="https://asset.kompas.com/data/2017/wp/js/jquery-redirect.js"></script>
    <script defer type="text/javascript" src="https://www.gstatic.com/firebasejs/7.23.0/firebase-app.js"></script>
<script defer type="text/javascript" src="https://www.gstatic.com/firebasejs/7.23.0/firebase-messaging.js"></script>
<script defer type="text/javascript" src="https://asset.kompas.com/kgnotif/2022/10/05/kompascom.js"></script>
<script defer type="text/javascript" src="https://asset.kompas.com/kgnotif/2022/10/05/unregissw.js"></script>
<script>
/*! lozad.js - v1.7.0 - 2018-11-08
* https://github.com/ApoorvSaxena/lozad.js
* Copyright (c) 2018 Apoorv Saxena; Licensed MIT */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.lozad=e()}(this,function(){"use strict";var g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},r="undefined"!=typeof document&&document.documentMode,l={rootMargin:"0px",threshold:0,load:function(t){if("picture"===t.nodeName.toLowerCase()){var e=document.createElement("img");r&&t.getAttribute("data-iesrc")&&(e.src=t.getAttribute("data-iesrc")),t.getAttribute("data-alt")&&(e.alt=t.getAttribute("data-alt")),t.appendChild(e)}t.getAttribute("data-src")&&(t.src=t.getAttribute("data-src")),t.getAttribute("data-srcset")&&t.setAttribute("srcset",t.getAttribute("data-srcset")),t.getAttribute("data-background-image")&&(t.style.backgroundImage="url('"+t.getAttribute("data-background-image")+"')"),t.getAttribute("data-toggle-class")&&t.classList.toggle(t.getAttribute("data-toggle-class"))},loaded:function(){}};
/**
   * Detect IE browser
   * @const {boolean}
   * @private
   */function f(t){t.setAttribute("data-loaded",!0)}var b=function(t){return"true"===t.getAttribute("data-loaded")};return function(){var r,o,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=g({},l,t),n=e.root,i=e.rootMargin,d=e.threshold,u=e.load,c=e.loaded,s=void 0;return window.IntersectionObserver&&(s=new IntersectionObserver((r=u,o=c,function(t,e){t.forEach(function(t){(0<t.intersectionRatio||t.isIntersecting)&&(e.unobserve(t.target),b(t.target)||(r(t.target),f(t.target),o(t.target)))})}),{root:n,rootMargin:i,threshold:d})),{observe:function(){for(var t=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return t instanceof Element?[t]:t instanceof NodeList?t:e.querySelectorAll(t)}(a,n),e=0;e<t.length;e++)b(t[e])||(s?s.observe(t[e]):(u(t[e]),f(t[e]),c(t[e])))},triggerLoad:function(t){b(t)||(u(t),f(t),c(t))},observer:s}}});
</script>

<script type="text/javascript">
    // Initialize library
    $(document).ready(function(){
        lozad('.lozad', {
            load: function(el) {
                el.src = el.dataset.src;
                el.onload = function() {
                    el.classList.add('fade')
                }
            }
        }).observe()
    });
</script><script type="text/javascript">
var observer_komentar = new IntersectionObserver(function(entires){
    entires.forEach(function(entry) {
        if(entry.intersectionRatio > 0){
            show_widget_komentar(entry.target)                
        }
    });
}, {
    threshold: 0
}); 

if(document.getElementById('comment-widget') !== null){
    observer_komentar.observe(document.getElementById('comment-widget-inject'));
}

function show_widget_komentar(element){
    console.log('show_widget_komentar');
    observer_komentar.unobserve(element);
    observer_komentar.disconnect();        

    Http = new XMLHttpRequest();
    Http.open("GET", 'https://apis.kompas.com/api/comment/widget');
    Http.send();

    Http.onreadystatechange = (e) => {
        if(Http.readyState == 4 && Http.status == 200) {
            json = JSON.parse(Http.responseText);
            new_comment = '';
            json.forEach(function(row, i){
                if(i > 4){
                    return;
                }
                content = row.detail[0].komentar;
                if(content.length > 100){
                    content = content.substring(0, 100)+'... [...]'
                }
                url_page = row.url_page.replace('http://', 'https://');

                new_comment += '<div class="cm__wItem">';
                new_comment += '<a href="'+url_page+'" class="cm__wLink">';
                new_comment += '<div class="cm__wNews">';
                new_comment += '<div class="cm__wImg"><img src="'+row.photo+'"></div>';
                new_comment += '<h4>'+row.title+'</h4>';
                kanal = url_page.substring(8, url_page.indexOf('.')).toUpperCase();
                if(kanal == 'WWW'){
                    kanal = url_page.split('/')[3].toUpperCase();
                }
                new_comment += '<span>'+kanal+' - '+row.tanggal_artikel+'</span>';
                new_comment += '</div></a>';
                new_comment += '<a href="'+url_page.replace('/read/', '/komentar/')+'?comment_id='+row.detail[0].id_comment+'" class="cm__wLink">';
                new_comment += '<div class="cm__wComment">';
                new_comment += '<div class="cm__wUsername">'+row.detail[0].nama+'</div>';
                new_comment += ' '+row.detail[0].komentar.split('$//$')[0]+'</div>';
                new_comment += '</a></div>';
                
            });
            document.getElementById('comment-widget').innerHTML = new_comment;
        }
    }
}
</script><script>
function setCookieUkid(cname, cvalue, exdays) {
  var d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  var expires = "expires="+ d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";domain=.kompas.com;path=/;";
}
if(document.cookie.indexOf('ukid=') == -1){
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
          var ukid_cookie = JSON.parse(xhttp.responseText);
          setCookieUkid('ukid', ukid_cookie.ukid, 365);
      }
  };
  xhttp.open("GET", "https://apis.kompas.com/api/activity/user", true);
  xhttp.send();
}
</script>
<script async src="https://asset.kompas.com/data/2022/10/05/wp/js/sso_g_signin.min.js"></script> 

<section class="kgmModal -hide" id="kgmModal-verify"> 
    <div class="kgmModal-block">
        <div class="kgmModal-header">
            <button type="button" onclick="checkCookieVer()" class="kgmModal-close"></button>
            <div class="kgmModal-title">Verifikasi akun KG Media ID</div>
            <div class="kgmModal-id"></div>
            <div class="kgmModal-img">
                <img src="https://asset.kompas.com/data/2021/kgmedia/images/verify.png" alt="Verifikasi akun KG Media ID">
            </div>
        </div>
        <div class="kgmModal-body">
            <p>Periksa kembali dan lengkapi data dirimu.</p>
            <p>Data dirimu akan digunakan untuk verifikasi akun ketika kamu membutuhkan bantuan atau ketika ditemukan aktivitas tidak biasa pada akunmu.</p>
        </div>
        <div class="kgmModal-footer">
            <div class="form-row">
            	<a href="javascript:void(0)" class="button -primary" onclick="doVerification()">Lakukan Sekarang</a>
            </div>
        </div>
    </div>
</section>

<script type="text/javascript"> 
    var cssKGM = document.createElement('link');
    cssKGM.rel = 'stylesheet';
    cssKGM.href = "https://assets.kompas.com/data/2021/kgmedia/2022/09/09/css/kgm-verify.min.css";
    document.head.appendChild(cssKGM);

    function setCookieVer(cname, cvalue, hours) {
        return new Promise(resolve => {
            var d = new Date();
            d.setTime(d.getTime() + hours * 60 * 60 * 1000);
            var expires = "expires=" + d.toUTCString();
            document.cookie = cname + "=" + cvalue + ";" + expires + ";domain=.kompas.com;path=/;secure;SameSite=None";
            resolve(true);
        });
    }
    
    function getCookieVer(cname) {
        return new Promise(resolve => {
            var name = cname + "=";
            var ca = document.cookie.split(";");
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == " ") {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    resolve(c.substring(name.length, c.length));
                }
            }
            resolve(""); 
        });

    }
    
    async function verification_reset(){
        var kmps_usrid = await getCookieVer("kmps_usrid");
        var verification_kmps_usrid = await getCookieVer("verification_kmps_usrid");
        if(document.cookie.indexOf('verification=') != -1 && kmps_usrid != verification_kmps_usrid){
            setCookieVer('verification_counter', 1, 0);
            setCookieVer('verification', 1, 0);
            setCookieVer('verification_kmps_usrid', 1, 0);
        }
        if(document.cookie.indexOf('verification_kmps_usrid=')==-1){
            setCookieVer('verification_kmps_usrid', kmps_usrid, 672);
        }
    }
    // verification_reset()

    async function verifyPopup(){
        var kmp_uid = await getCookieVer("kmp_uid");
        var lgn_w = await getCookieVer("lgn_w");
        if(kmp_uid){
            var settings = {
                "url": "https://apis.kompas.com/api/sso_new/user/detail?token="+kmp_uid+"&loginwith="+lgn_w,
                "method": "GET",
                "timeout": 0,
            };
            $.ajax(settings).done(function (response) {
                var status      = response['status'];
                var gender      = response['user']['gender'];
                var birthdate   = response['user']['birthdate'];
                var phone_2     = response['user']['phone_2'];
                var email       = response['user']['email'];
                var age         = response['user']['age'];
                if(document.cookie.indexOf('verification=') == -1){
                    if(status == true && (gender === "" || birthdate === "" || phone_2 === "" || typeof gender == 'undefined' || typeof birthdate == 'undefined' || typeof phone_2 == 'undefined')) {
                        document.getElementById('kgmModal-verify').classList.remove('-hide');
                    }else{
                        setCookieVer('verification', 1, 672);
                    }
                    $(".kgmModal-id").html(email);
                }

                if(lgn_w != 'myvalue'){
                    restrictedContent(birthdate, age);
                }else{
                    document.body.classList.remove("-restricted");
                }
            });

        }else{
            if(getMeta('content_sensi') == '1'){
                document.getElementsByClassName('restricted-lead')[0].innerHTML = '<p>Masuk dan konfirmasi usia untuk melihat konten</p>'
                document.getElementsByClassName('restricted-link')[0].innerHTML = 'Login untuk Akses';
                document.getElementsByClassName('restricted-link')[0].setAttribute('href','https://account.kompas.com/login/a29tcGFz/aHR0cDovL3ZpZGVvLmxrb21wYXMuY29tL3JvbGxzLzIxNjEzMz9sZ252aWE9a29udGVuc2Vuc2l0aWY=?source=kompas_com&medium=kontensensitif');
                document.getElementById('restricted').style.display='';
            }
        }
    }
    
    if(getMeta('content_category') == 'Global'){
        if(document.cookie.indexOf('acceptCookie=') != -1){
            verifyPopup();
        }
    }else{
        verifyPopup();
    }
    
    async function checkCookieVer() { 
        var verification_counter = await getCookieVer('verification_counter');
        if (verification_counter == "") {            
            setCookieVer('verification_counter', 1, 8760);
        }else{
            setCookieVer('verification_counter', parseInt(verification_counter)+1, 8760);
        }

        if (verification_counter == '') {
            setCookieVer('verification', 1, 2);
        } else if (verification_counter == 1) {
            setCookieVer('verification', 1, 24);
        } else if (verification_counter == 2) {
            setCookieVer('verification', 1, 168);
        } else {
            setCookieVer('verification', 1, 672);
        }

        document.getElementById('kgmModal-verify').classList.add('-hide');
    }

    async function doVerification() { 
        window.location.href = "https://account.kompas.com/verify_data?source=kompascom&medium=verifikasiakun&vid="+await getCookieVer("kmp_uid")+"&rurl="+btoa(window.location.href)+"";
    }

    function getMeta(metaName) {
        const metas = document.getElementsByTagName('meta');
        for (let i = 0; i < metas.length; i++) {
            if (metas[i].getAttribute('name') === metaName) {
            return metas[i].getAttribute('content');
            }
        }
        return '';
    }

    function restrictedContent(birthdate, age){
        if(getMeta('content_sensi') == '1'){

            const params = new Proxy(new URLSearchParams(window.location.search), {
                get: (searchParams, prop) => searchParams.get(prop),
            });
            var lgnvia = params.lgnvia;

            if((birthdate === "" || typeof birthdate == 'undefined') && lgnvia == 'kontensensitif'){
                document.getElementById('kgmModal-verify').classList.add('-hide');
                window.top.location.href = 'https://account.kompas.com/profile_setting?kontensensitif&source=kompas_com&medium=kontensensitif&kurl=aHR0cDovL3ZpZGVvLmxrb21wYXMuY29tL3JvbGxzLzIxNjEzMw=='
            }else if((birthdate === "" || typeof birthdate == 'undefined')){
                document.getElementById('kgmModal-verify').classList.add('-hide');
                document.getElementsByClassName('restricted-lead')[0].innerHTML = '<p>Untuk melihat konten, konfirmasi usiamu</p>'
                document.getElementsByClassName('restricted-link')[0].innerHTML = 'Lengkapi Profil';
                document.getElementsByClassName('restricted-link')[0].setAttribute('href','https://account.kompas.com/profile_setting?kontensensitif&source=kompas_com&medium=kontensensitif&kurl=aHR0cDovL3ZpZGVvLmxrb21wYXMuY29tL3JvbGxzLzIxNjEzMw==');
                document.getElementById('restricted').style.display='';
            }else if(age < 18){
                document.getElementById('kgmModal-verify').classList.add('-hide');
                document.getElementsByClassName('restricted-lead')[0].innerHTML = '<p>Usiamu belum sesuai untuk melihat konten ini</p>'
                document.getElementsByClassName('restricted-link')[0].innerHTML = 'Lihat Artikel Lainnya';
                document.getElementsByClassName('restricted-link')[0].setAttribute('href','https://www.kompas.com');
                document.getElementsByClassName('restricted-link')[0].classList.add("restricted-link-text");
                document.getElementById('restricted').style.display='';
            }else{
                document.body.classList.remove("-restricted");
            }
        }
    }

    if(getMeta('content_sensi') == '1' && document.cookie.indexOf('kmp_uid=')==-1){
        document.getElementsByClassName('restricted-lead')[0].innerHTML = '<p>Masuk dan konfirmasi usia untuk melihat konten</p>'
        document.getElementsByClassName('restricted-link')[0].innerHTML = 'Login untuk Akses';
        document.getElementsByClassName('restricted-link')[0].setAttribute('href','https://account.kompas.com/login/a29tcGFz/aHR0cDovL3ZpZGVvLmxrb21wYXMuY29tL3JvbGxzLzIxNjEzMz9sZ252aWE9a29udGVuc2Vuc2l0aWY=?source=kompas_com&medium=kontensensitif');
        document.getElementById('restricted').style.display='';
    }

</script>

<script>    
var el_badge = document.querySelector('.kgid-badge-menu')
var el_badge_menu = document.querySelector('.kgid-badge-inline')

function checkSession() {
    var badge_temp_session = getCookie("_badge_temp_session")
    var badge_session = getCookie("badge_session")
    var badge_first_click = getCookie("badge_first_click");

    if (badge_temp_session == "" && badge_session == "")  {
        setCookie("_badge_temp_session", 1)
        setCookie("badge_session", 1, 8760)
        // console.log("test badge temp 1")
    } else if (badge_temp_session == "" && badge_session == 1) {
        setCookie("_badge_temp_session", 1)
        setCookie("badge_session", 2, 8760)
        // console.log("test badge temp 2")
    } else if (badge_temp_session == "" && badge_session == 2 && badge_first_click == 1) {
        setCookie("_badge_temp_session", 1)
        setCookie("badge_session", 3, 8760)
        // console.log("test badge temp 3")
    }

    setCookie("_badge_temp_session", 1)
}
checkSession()

function checkCookieBadgeNps() {
    var badge_session = getCookie("badge_session")
    var badge_first_click = getCookie("badge_first_click")
    var click_icon_badge = getCookie("click_icon_badge")
    var feedback_click = getCookie("feedback_click_badge")
    
    // show badge jika sesi berikutnya  
    if (badge_session == 2) {
        el_badge.style.display = "block"
        el_badge_menu.style.display = "inline-block"
        // console.log("test 1")    
    } 

    // jika ada di sesi berikutnya dan telah click badge icon utk pertama kali, maka hide badge icon login
    if (badge_session == 2 && badge_first_click == 1) {
        el_badge.style.display = "none"
        // console.log("test 2")  
        
    // jika tidak cek,
    // jika ada di sesi berikutnya dan telah click badge icon utk pertama kali
    // atau jika di sesi berikutnya dan cookie click icon badge expired
    // atau jika di sesi berikutnya dan cookie badge feedback success expired
    } else if ((badge_session == 3 && badge_first_click == 1) || (badge_session == 3 && document.cookie.indexOf("click_icon_badge=") == -1) || (badge_session == 3 && document.cookie.indexOf("badge_feedback_success=") == -1)) {
        el_badge.style.display = "block"
        el_badge_menu.style.display = "inline-block"
        // console.log("test 3")
    }

    // hide jika ada cookie click icon badge masih aktif 
    // utk cek cookie 2 jam, 1 hari, 1 minggu dan 4 minggu.
    if (document.cookie.indexOf("click_icon_badge=") != -1) {
        el_badge.style.display = "none"
        // console.log("test 4")
    }

    // jika "Berikan masukkanmu" telah dikilk, maka hide
    // jika tidak, cek jika sesi > 1 dan cookie feedback click badge "Berikan masukkanmu" expired, maka show
    if (document.cookie.indexOf("feedback_click_badge=") != -1) {
        el_badge_menu.style.display = "none"
        // console.log("test 5")
    } else if (badge_session > 1 && document.cookie.indexOf("feedback_click_badge=") == -1) {
        el_badge_menu.style.display = "inline-block"
        // console.log("test 6")
    }

    // hide jika telah memberi penilaian 
    if (document.cookie.indexOf("badge_feedback_success=") != -1) {
        el_badge.style.display = "none"
        el_badge_menu.style.display = "none"
        // console.log("test 7")
    }
}
checkCookieBadgeNps()

var btn_hamb = document.querySelector('.button-burger')
btn_hamb.addEventListener('click', function() {
    var badge_session = getCookie("badge_session")
    var badge_first_click = getCookie("badge_first_click")
    var feedback_success = getCookie("badge_feedback_success")
    var click_icon_badge = getCookie("click_icon_badge")
    var click_icon_counter_badge = getCookie("click_icon_counter_badge")

    if (feedback_success == "" || document.cookie.indexOf("badge_feedback_success=") == -1) {
        // click untuk pertama kali di sesi berikutnya
        if (badge_session == 2 && badge_first_click == "") {
            el_badge.style.display = "none"
            el_badge_menu.style.display = "inline-block"
            setCookie("badge_first_click", 1, 8760)
            // console.log("click 1")

        // click jika sesi berikutnya setelah mengklik icon badge utk pertama kali    
        } else {
            // jika belum ada cookie click icon badge
            // dan ada di sesi berikutnya setelah click icon pertama kali
            // dan counter click icon kosong atau 0
            if (badge_session == 3 && click_icon_badge == "" && (click_icon_counter_badge == "" || click_icon_counter_badge == 0)) { 
                setCookie("click_icon_counter_badge", 1, 8760)
                setCookie("click_icon_badge", 1, 2)
                el_badge.style.display = "none"
                el_badge_menu.style.display = "inline-block"
                // console.log("clicked 1")

            // Jika cookie badge click icon expired dan counter = 1, maka set 1 hari
            } else if (document.cookie.indexOf("click_icon_badge=") == -1 && click_icon_counter_badge == 1) { 
                setCookie("click_icon_counter_badge", parseInt(click_icon_counter_badge)+1, 8760)
                setCookie("click_icon_badge", 2, 24)
                el_badge.style.display = "none"
                el_badge_menu.style.display = "inline-block"
                // console.log("clicked 2")

            // Jika cookie badge click icon expired dan counter = 2, maka set 1 minggu
            } else if (document.cookie.indexOf("click_icon_badge=") == -1 && click_icon_counter_badge == 2) {
                setCookie("click_icon_counter_badge", parseInt(click_icon_counter_badge)+1, 8760)
                setCookie("click_icon_badge", 3, 168)
                el_badge.style.display = "none"
                el_badge_menu.style.display = "inline-block"
                // console.log("clicked 3")
            
            // Jika cookie badge click icon expired dan counter lebih dari 2, maka set 4 minggu
            } else if (document.cookie.indexOf("click_icon_badge=") == -1 && click_icon_counter_badge > 2) {
                setCookie("click_icon_counter_badge", 0, 8760) // reset badge counter click icon 
                setCookie("click_icon_badge", 4, 672)
                el_badge.style.display = "none"
                el_badge_menu.style.display = "inline-block"
                // console.log("clicked 4")
            }
            // console.log("click 2")
        }  

        // jika feedback click expired dan counter >= 0, maka show
        var feedback_click_counter = getCookie("feedback_click_counter_badge")
        if (badge_session > 1 && document.cookie.indexOf("feedback_click_badge") == -1 && feedback_click_counter >= 0) {
            el_badge_menu.style.display = 'inline-block'
        } 
    }     
})

var kgid_nav_nps = document.querySelector('.kgid-nav-nps')
kgid_nav_nps.addEventListener("click", function() {
    var feedback_click = getCookie("feedback_click_badge")
    var feedback_success = getCookie("badge_feedback_success")
    var feedback_click_counter = getCookie("feedback_click_counter_badge")

    if (feedback_success == "" || document.cookie.indexOf("badge_feedback_success=") == -1) {
        // jika belum ada cookie feedback click counter, maka set 2 jam
        if (feedback_click_counter == "" || feedback_click_counter == 0) { 
            setCookie("feedback_click_counter_badge", 1, 8760)
            setCookie("feedback_click_badge", 1, 2)
            el_badge_menu.style.display = "none"
            // console.log("feedback clicked 1")

        // Jika cookie feedback click badge expired dan counter 1, maka set 1 hari
        } else if (document.cookie.indexOf("feedback_click_badge=") == -1 && feedback_click_counter == 1) { 
            setCookie("feedback_click_counter_badge", parseInt(feedback_click_counter)+1, 8760)
            setCookie("feedback_click_badge", 2, 24)
            el_badge_menu.style.display = "none"
            // console.log("feedback clicked 2")

        // Jika cookie feedback click badge expired dan counter 2, maka set 1 minggu
        } else if (document.cookie.indexOf("feedback_click_badge=") == -1 && feedback_click_counter == 2) {
            setCookie("feedback_click_counter_badge", parseInt(feedback_click_counter)+1, 8760)
            setCookie("feedback_click_badge", 3, 168)
            el_badge_menu.style.display = "none"
            // console.log("feedback clicked 3")
        
        // Jika cookie feedback click badge expired dan counter > 2, maka set 4 minggu
        } else if (document.cookie.indexOf("feedback_click_badge=") == -1 && feedback_click_counter > 2) {
            setCookie("feedback_click_counter_badge", 0, 8760)
            setCookie("feedback_click_badge", 4, 672)
            el_badge_menu.style.display = "none"
            // console.log("feedback clicked 4")
        } else {
            // jika di sesi sebelumnya sudah diklik tapi belum isi feedback
            el_badge_menu.style.display = "none"
            // console.log("feedback clicked 5")
        }
    } 
})

function setCookie(name,value,hour) {
    var expires = "";
    if (hour) {
        var date = new Date();
        date.setTime(date.getTime() + (hour*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "")  + expires + "; ;domain=.kompas.com;path=/";
}

function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i <ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
        c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length);
        }
    }
    return "";
}

// action create cookie badge_feedback_success expired 90 hari
var onSubmitNps = document.getElementById("nps-submit")
if (onSubmitNps !== null) {
    onSubmitNps.addEventListener("click", function(e) {
        // e.preventDefault()
        setCookie("badge_feedback_success", 1, 2160)
    })
}
</script>
<script src="https://asset.kompas.com/data/2022/loyalty/loyalty.js"></script>
<script>
    var kompas_id = ("; "+document.cookie).split("; kmps_usrid=").pop().split(";").shift();
    var random_interval = gen_random_interval();

            var base_url = "https://play.kompas.com/";
    
    if (kompas_id) {
        gen_loyalty();
    }

    function gen_loyalty() {
        let participant_loyalty = get_cookie('participant_loyalty');
        if (participant_loyalty.indexOf('404_')>-1 && participant_loyalty.indexOf(kompas_id)>-1) {
            return ""
        } else if (kompas_id == participant_loyalty) {
            document.querySelector('#loyalty_koin').style.display = 'block'
            return action_activity_flag();
        }
        
        return participant_exists().then(function(data) {
            if (data) {
                document.querySelector('#loyalty_koin').style.display = 'block'
                return action_activity_flag();
            } else {
                document.querySelector('#loyalty_koin').style.display = 'none'
            }
        })
    }

    function action_activity_flag() {
            }

    async function participant_exists() {
        const response = await fetch(`${base_url}api/loyalty/participant?exists=${kompas_id}`, {
            method: 'GET'
        });
        const participant = await response.json();

        if (participant.status) {
            set_cookie('participant_loyalty', kompas_id, 8760) // 1 year  
            return true;
        } else {                        
            set_cookie('participant_loyalty', '404_'+kompas_id, 8760) // 1 year
            return false;
        }
    }

    function gen_activity_flag() {
        var url = window.location.pathname;
        var path = url.split('/')
        if (path[1] == 'read') {
            return path[2]+'/'+path[3]+'/'+path[4]+'/'+path[5];
        } else if (path[1] != 'read') {
            return path[3]+'/'+path[4]+'/'+path[5]+'/'+path[6];
        }

        return "";
    }

    function set_cookie(name,value,hour) {
        var expires = "";
        if (hour) {
            var date = new Date();
            date.setTime(date.getTime() + (hour*60*60*1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + (value || "") + ";" + expires + ";domain=.kompas.com;path=/;secure;SameSite=None";
    }

    function get_cookie(cname) {
        var name = cname + "=";
        var decodedCookie = decodeURIComponent(document.cookie);
        var ca = decodedCookie.split(';');
        for(var i = 0; i <ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') {
            c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
            }
        }
        return "";
    }

    document.querySelector('#loyalty_koin').addEventListener('click', function() {
        set_cookie('lagging_badge_click', random_interval, random_interval);
    })

    function active_badge(active) {
        if (!active) {
            desk_badge_koin = document.querySelector('.loyalty__link__badge')
            if (desk_badge_koin) {
                desk_badge_koin.classList.remove('active')
            }
            mob_badge_koin  = document.querySelector('.icon-koin-badge');
            if (mob_badge_koin) {
                mob_badge_koin.style.display = 'none'
            }
        } else {
            desk_badge_koin = document.querySelector('.loyalty__link__badge')
            if (desk_badge_koin) {
                desk_badge_koin.classList.add('active') 
            }       
            mob_badge_koin = document.querySelector('.icon-koin-badge');
            if (mob_badge_koin) {
                mob_badge_koin.style.display = 'block'
            }
        }
    }

    function gen_random_interval() {
        var min = 60;
        var max = 600;
        return Math.floor(Math.random()*(max - min)) + min;
    }

    function set_cookie_badge_expired() {
        set_cookie('lagging_badge_expired', random_interval, random_interval);
    }

    function check_badge_koin() {
        var lagging_badge_click = get_cookie('lagging_badge_click');
        var lagging_badge_expired = get_cookie('lagging_badge_expired');
        if (lagging_badge_expired) {
            if (lagging_badge_click) {
                active_badge(false);
            }
            setTimeout(function() {
                active_badge(true);
            }, lagging_badge_expired * 1000);
        } else if (lagging_badge_click) {
            active_badge(false);
            setTimeout(check_badge_koin, random_interval*1000);
        } else {
            setTimeout(check_badge_koin, random_interval*1000);
        }
    }
    check_badge_koin()

    if (window.location.href.indexOf('loyalty') > -1) {
        set_cookie('lagging_badge_click', random_interval, random_interval);
        active_badge(false);
    }
</script>	
</body>
</html>
